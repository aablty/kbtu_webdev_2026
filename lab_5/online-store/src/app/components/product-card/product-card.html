<div
  class="h-full group flex flex-col overflow-hidden rounded-2xl border border-border bg-card shadow-sm transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-primary/10"
>
  <app-image-gallery [images]="product().images" [productName]="product().name"></app-image-gallery>

  <div class="flex flex-1 flex-col gap-2 p-4">
    <div class="flex items-start justify-between gap-2">
      <h3 class="text-sm font-bold leading-snug text-card-foreground line-clamp-2">
        {{ product().name }}
      </h3>
    </div>

    <p
      class="text-xs leading-relaxed text-muted-foreground line-clamp-2"
      [innerHTML]="product().description"
    ></p>

    <app-star-rating [rating]="product().rating"></app-star-rating>

    <p class="text-lg font-extrabold text-primary">
      {{ formattedPrice() }}
    </p>

    <div class="flex items-center justify-between gap-2 mt-auto">
      <a
        [href]="product().link"
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center justify-center gap-1.5 rounded-full bg-primary p-2 text-xs font-semibold text-primary-foreground transition-all hover:opacity-90 active:scale-95"
      >
        <lucide-icon name="external-link" class="h-3.5 w-3.5"></lucide-icon>
      </a>
      <button
        type="button"
        (click)="onLikeClick()"
        class="h-full w-16 inline-flex items-center justify-center gap-1 rounded-full bg-secondary px-2 py-1 text-xs font-semibold text-secondary-foreground transition-all active:scale-95"
        [class.scale-110]="isLikeAnimated"
        [class.text-primary]="isLikeAnimated"
        aria-label="Like product"
      >
        ‚ù§ {{ likes() }}
      </button>
      <button
        type="button"
        (click)="onDeleteClick()"
        class="h-full inline-flex items-center gap-1 rounded-full bg-secondary px-2 py-1 text-xs font-semibold text-secondary-foreground transition-colors hover:bg-primary hover:text-primary-foreground"
        aria-label="Delete product"
      >
        <lucide-icon name="trash-2" class="h-3.5 w-3.5"></lucide-icon>
      </button>
      <app-share-button
        [productName]="product().name"
        [productLink]="product().link"
        class="h-full"
      ></app-share-button>
    </div>
  </div>
</div>
