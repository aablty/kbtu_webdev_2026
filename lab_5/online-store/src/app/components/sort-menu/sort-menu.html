<div class="relative inline-flex">
  <button
    type="button"
    (click)="toggle()"
    class="h-10 inline-flex items-center gap-2 rounded-full border border-border bg-card px-4 py-2 text-xs font-semibold text-foreground transition-colors hover:bg-secondary"
    [attr.aria-expanded]="isOpen"
    aria-haspopup="listbox"
  >
    <span>Sort: {{ getSelectedLabel() }}</span>
    <lucide-icon name="chevron-down" class="h-3.5 w-3.5"></lucide-icon>
  </button>

  @if (isOpen) {
    <div
      class="absolute right-0 top-full z-10 mt-2 w-48 rounded-xl border border-border bg-card p-1 shadow-lg"
      role="listbox"
    >
      @for (option of options; track option.value) {
        <button
          type="button"
          (click)="selectOption(option.value)"
          [class]="
            'flex w-full items-center justify-between gap-2 rounded-lg px-3 py-2 text-left text-xs font-medium transition-colors ' +
            (option.value === sortOption()
              ? 'bg-primary text-primary-foreground'
              : 'text-foreground hover:bg-secondary')
          "
        >
          <span>{{ option.label }}</span>
          @if (option.value === sortOption()) {
            <lucide-icon name="dot" class="h-3 w-3"></lucide-icon>
          }
        </button>
      }
    </div>
  }
</div>
