<div class="mx-auto max-w-3xl px-6 py-10">
  <div class="mb-8 flex flex-col items-center gap-4">
    <h1 class="font-serif text-4xl font-bold text-foreground">All Albums</h1>
    <p class="text-sm text-muted-foreground">Pick your favorite, bestie</p>
    <div class="relative w-full max-w-md">
      <input
        placeholder="Search albums..."
        [(ngModel)]="search"
        (ngModelChange)="onSearchChange($event)"
        class="file:text-foreground selection:bg-primary selection:text-primary-foreground h-9 w-full min-w-0 px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm focus-visible:ring-[3px] aria-invalid:ring-destructive/20 aria-invalid:border-destructive rounded-full border-2 border-input bg-card pl-10 text-foreground placeholder:text-muted-foreground focus-visible:border-primary focus-visible:ring-primary"
      />
      <lucide-icon
        name="search"
        class="absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"
      />
    </div>
  </div>

  @if (isLoading) {
    <div class="flex flex-col items-center gap-3 py-20">
      <lucide-icon name="loader2" class="h-8 w-8 animate-spin text-primary" />
      <p class="text-sm text-muted-foreground">Loading albums...</p>
    </div>
  }
  @if (error) {
    <div class="flex flex-col items-center gap-2 py-20">
      <p class="text-sm text-destructive">{{ error }}</p>
    </div>
  }

  @if (filteredAlbums && filteredAlbums.length === 0 && !isLoading) {
    <div class="flex flex-col items-center gap-2 py-20">
      <p class="text-sm text-muted-foreground">No albums found, try a different search!</p>
    </div>
  }
  <div class="flex flex-col gap-3">
    @for (album of filteredAlbums; track album) {
      <a
        [routerLink]="['/albums', album.id]"
        class="group flex items-center gap-4 rounded-2xl border-2 border-border bg-card p-4 shadow-sm transition-all hover:border-primary hover:shadow-md"
      >
        <div
          class="flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-secondary text-sm font-bold text-secondary-foreground"
        >
          {{ album.id }}
        </div>
        <p
          class="flex-1 text-sm font-medium leading-relaxed text-card-foreground group-hover:text-accent"
        >
          {{ album.title }}
        </p>
        <button
          type="button"
          class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 aria-invalid:border-destructive size-9 shrink-0 rounded-full text-muted-foreground hover:bg-destructive/10 hover:text-destructive"
          (click)="handleDelete($event, album.id)"
          [disabled]="deletingId === album.id"
          [attr.aria-label]="'Delete album ' + album.id"
        >
          @if (deletingId === album.id) {
            <lucide-icon name="loader2" class="h-4 w-4 animate-spin" />
          }
          @if (deletingId !== album.id) {
            <lucide-icon name="trash2" class="h-4 w-4" />
          }
        </button>
      </a>
    }
  </div>
</div>
